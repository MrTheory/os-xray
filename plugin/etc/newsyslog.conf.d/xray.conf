# newsyslog rotation config for os-xray plugin
# BUG-11 FIX: без ротации лог /var/log/xray-core.log (добавлен в BUG-7) растёт бесконечно.
#
# Формат полей (man newsyslog.conf):
#   logfile_name  [owner:group]  mode  count  size  when  [flags]  [/pid_file]  [sig_num]
#
# count=3  — хранить 3 архива (xray-core.log.0, .1, .2)
# size=600  — ротировать при размере > 600 KB (600*1024 байт = 614400 B)
# when=*    — не ротировать по расписанию, только по размеру
# flags=JG  — J: bzip2-сжатие архива; G: mode в виде %YYYY%MM%DD%HH%MM
#             (если bzip2 недоступен — использовать флаг Z для gzip, или убрать сжатие)
#
# Сигнал не нужен: xray-core не держит лог-файл открытым через fd —
# демон пишет через shell-редирект (>>), каждую запись открывая заново.
# Поэтому ротация без сигнала корректна.

/var/log/xray-core.log          644  3  600  *  JG
